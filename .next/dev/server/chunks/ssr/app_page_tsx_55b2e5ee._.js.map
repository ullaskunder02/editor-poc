{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/admin/knidal-projects/editor-imp/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useRef, useState } from \"react\"\n// @ts-ignore\nimport EditorJS, { type OutputData, type BlockTool } from \"@editorjs/editorjs\"\n// @ts-ignore\nimport Header from \"@editorjs/header\"\n// @ts-ignore\nimport List from \"@editorjs/list\"\n// @ts-ignore\nimport Checklist from \"@editorjs/checklist\"\n// @ts-ignore\nimport Table from \"@editorjs/table\"\n// @ts-ignore\nimport Code from \"@editorjs/code\"\n// @ts-ignore\nimport InlineCode from \"@editorjs/inline-code\"\n// @ts-ignore\nimport Underline from \"@editorjs/underline\"\n// @ts-ignore\nimport Marker from \"@editorjs/marker\"\n// @ts-ignore\nimport ImageTool from \"@editorjs/image\"\n// @ts-ignore\nimport Embed from \"@editorjs/embed\"\n// @ts-ignore\nimport Quote from \"@editorjs/quote\"\n// @ts-ignore\nimport Delimiter from \"@editorjs/delimiter\"\n// @ts-ignore\nimport DragDrop from \"editorjs-drag-drop\"\n\nconst EDITOR_HOLDER_ID = \"editorjs\"\n\n// --- MEDIA TOOL (STAYS THE SAME) ---\nclass LiveMediaTool implements BlockTool {\n  static get toolbox() { return { title: 'Video/Audio', icon: 'ðŸŽ¥' }; }\n  private data: any;\n  private wrapper: HTMLElement;\n  private descriptionField: HTMLElement | null = null;\n  constructor({ data }: { data: any }) {\n    this.data = data || { url: '', type: '', name: '', description: '' };\n    this.wrapper = document.createElement('div');\n  }\n  render() {\n    this.wrapper.style.padding = \"15px\";\n    this.wrapper.style.border = \"1px solid #f0f0f0\";\n    this.wrapper.style.borderRadius = \"10px\";\n    if (this.data && this.data.url) { this._renderPlayer(this.data.url, this.data.type); } \n    else {\n      const input = document.createElement('input');\n      input.type = 'file';\n      input.accept = 'video/*,audio/*';\n      input.style.display = 'none';\n      input.onchange = (e: any) => {\n        const file = e.target.files[0];\n        if (!file) return;\n        const reader = new FileReader();\n        reader.onload = (event) => {\n          const url = event.target?.result as string;\n          const type = file.type.startsWith('video') ? 'video' : 'audio';\n          this.data = { ...this.data, url, type, name: file.name };\n          this._renderPlayer(url, type);\n        };\n        reader.readAsDataURL(file);\n      };\n      this.wrapper.appendChild(input);\n      setTimeout(() => input.click(), 0);\n    }\n    return this.wrapper;\n  }\n  _renderPlayer(url: string, type: 'video' | 'audio') {\n    this.wrapper.innerHTML = '';\n    const mediaTag = document.createElement(type);\n    mediaTag.src = url; mediaTag.controls = true; mediaTag.style.width = \"100%\";\n    const desc = document.createElement('div');\n    desc.contentEditable = \"true\";\n    desc.dataset.placeholder = \"Add a description...\";\n    desc.innerHTML = this.data.description || '';\n    desc.style.cssText = \"margin-top:10px; padding:8px; border-left:2px solid #0070f3;\";\n    desc.addEventListener('input', () => { this.data.description = desc.innerHTML; });\n    this.descriptionField = desc;\n    this.wrapper.appendChild(mediaTag);\n    this.wrapper.appendChild(desc);\n  }\n  save() { return { ...this.data, description: this.descriptionField ? this.descriptionField.innerHTML : this.data.description }; }\n}\n\n// --- CONVERTER (UPDATED TO HANDLE MULTIPLE HEADER TYPES) ---\nconst convertToMarkdown = (data: OutputData): string => {\n  let markdown = \"\"\n  data.blocks.forEach((block) => {\n    // Check if the type is h1, h2, etc., or the default 'header'\n    if (block.type.match(/^h[1-6]$/)) {\n        const level = block.type.charAt(1);\n        markdown += `${\"#\".repeat(parseInt(level))} ${block.data.text}\\n\\n`\n    } else {\n        switch (block.type) {\n          case \"header\":\n            markdown += `${\"#\".repeat(block.data.level || 2)} ${block.data.text}\\n\\n`\n            break\n          case \"paragraph\":\n            markdown += `${block.data.text}\\n\\n`\n            break\n          case \"media\":\n            const tag = block.data.type === 'video' ? 'video' : 'audio';\n            markdown += `<${tag} controls src=\"${block.data.url}\" style=\"width:100%\"></${tag}>\\n`\n            if (block.data.description) markdown += `\\n*${block.data.description.replace(/<[^>]*>/g, '')}*\\n\\n`\n            else markdown += `\\n`\n            break\n          case \"delimiter\":\n            markdown += `---\\n\\n`\n            break\n          default:\n            if (block.data.text) markdown += `${block.data.text}\\n\\n`\n            break\n        }\n    }\n  })\n  return markdown.trim()\n}\n\nexport default function Page() {\n  const editorInstance = useRef<EditorJS | null>(null)\n  const [markdown, setMarkdown] = useState<string>(\"\")\n  const [showMarkdown, setShowMarkdown] = useState<boolean>(false)\n\n  useEffect(() => {\n    if (!editorInstance.current) initEditor()\n    return () => { editorInstance.current?.destroy(); editorInstance.current = null; }\n  }, [])\n\n  const initEditor = () => {\n    const editor = new EditorJS({\n      holder: EDITOR_HOLDER_ID,\n      placeholder: \"Press '/' for commands...\",\n      onReady: () => { /* @ts-ignore */ new DragDrop(editor) },\n        tools: {\n        // We override the 'toolbox' property for each level so they show H1, H2, etc.\n        h1: { \n          class: Header, \n          toolbox: { title: 'Main Title', icon: '<b style=\"font-size: 1.2em\">H1</b>' },\n          config: { placeholder: 'Heading 1', levels: [1], defaultLevel: 1 } \n        },\n        h2: { \n          class: Header, \n          toolbox: { title: 'Subtitle', icon: '<b>H2</b>' },\n          config: { placeholder: 'Heading 2', levels: [2], defaultLevel: 2 } \n        },\n        h3: { \n          class: Header, \n          toolbox: { title: 'Section', icon: '<b style=\"font-size: 0.9em\">H3</b>' },\n          config: { placeholder: 'Heading 3', levels: [3], defaultLevel: 3 } \n        },\n        media: LiveMediaTool,\n        list: List,\n        checklist: Checklist,\n        table: Table,\n        quote: Quote,\n        code: Code,\n        delimiter: Delimiter,\n        inlineCode: InlineCode,\n        marker: Marker,\n        underline: Underline,\n      }\n    })\n    editorInstance.current = editor\n  }\n\n  const handleSave = async () => {\n    const data = await editorInstance.current?.save()\n    if (data) {\n      setMarkdown(convertToMarkdown(data))\n      setShowMarkdown(true)\n    }\n  }\n\n  return (\n    <div style={{ padding: \"40px\", maxWidth: \"850px\", margin: \"0 auto\", fontFamily: \"system-ui\" }}>\n      <div id={EDITOR_HOLDER_ID} style={{ border: \"1px solid #e0e0e0\", padding: \"30px\", borderRadius: \"16px\", minHeight: \"450px\", backgroundColor: \"#fff\" }} />\n      <div style={{ display: \"flex\", justifyContent: \"center\", marginTop: \"30px\" }}>\n        <button onClick={handleSave} style={{ padding: \"14px 32px\", background: \"#0070f3\", color: \"white\", borderRadius: \"10px\", border: \"none\", cursor: \"pointer\", fontWeight: \"600\" }}>\n          Preview Content\n        </button>\n      </div>\n      {showMarkdown && (\n        <div style={{ marginTop: \"50px\" }}>\n          <div style={{ border: \"1px solid #ddd\", padding: \"40px\", borderRadius: \"16px\", background: \"#fff\" }} dangerouslySetInnerHTML={{ __html: markdown.replace(/\\n/g, '<br/>') }} />\n          <pre style={{ background: \"#1a1a1a\", color: \"#80cbc4\", padding: \"25px\", borderRadius: \"12px\", marginTop: \"20px\", overflowX: \"auto\" }}>\n            <code>{markdown}</code>\n          </pre>\n        </div>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":"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"}}]
}